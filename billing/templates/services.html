<!DOCTYPE html>
{% load static %}
{% load i18n %}
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu avec Dropdowns</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    

    <style>
        body {
            font-family: Arial, sans-serif;
        }

        nav {
            /* background-color: #333; */
            width: 200px; /* Largeur du menu */
            padding: 10px;
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;

            
        }

        .menu {
            list-style-type: none;
            margin: 0;
            padding: 0;

        }

        .menu > li {
            position: relative;
            
        }

        a {
            color: white;
            text-decoration: none;
            padding: 10px;
            display: block;
            background-color: #a6a6a6;
        }

        .dropdown-menu {
            display: none; /* Les menus sont cach√©s par d√©faut */
            background-color: #555;
            list-style-type: none;
            margin: 0;
            padding: 0;
            position: relative;
            width: 100%;
            transition: max-height 0.3s ease-out; /* Transition pour l'agrandissement */
            max-height: 0; /* Par d√©faut, le menu est r√©tract√© */
            overflow: hidden;
            

        }

        .dropdown-menu li a {
            padding: 8px 20px;
            width: 100%;
        }

        /* Ajoute une classe pour l'activation du menu */
        .dropdown-menu.show {
            display: block;
            max-height: 500px; /* Taille maximale quand le menu est d√©pli√© */
        }
        
    /* Menu lat√©ral √† droite */
    .side-menu {
        position: fixed;
        top: 20px;
        right: 0;
        width:150px;
        background-color: #ffffff;
        box-shadow: -2px 0px 5px rgba(0, 0, 0, 0.2);
        padding: 20px;
        border-radius: 10px 0 0 10px;
        
    }

    .side-menu h3 {
        font-size: 16px;
        color: rgb(223, 238, 255);
        margin-bottom: 20px;
        

    }

    .side-menu .menu-item {
        padding: 10px;
        cursor: pointer;
        background-color: #f9f9f9;
        margin-bottom: 10px;
        border-radius: 5px;
    }

    .side-menu .menu-item:hover {
        background-color: #e0e0e0;
    }



    .menu-item {
    padding: 8px 12px;
    cursor: pointer;
}

.menu-item:hover {
    background-color: #f0f0f0;
}

    button {
    display: block;
    margin: 20px auto;
    padding: 10px 15px;
    background: #f39c12;
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 5px;
    font-size: 16px;
}













/* Sous options*/
.text-with-icon {
            font-size: 18px; /* Taille du texte */
            font-family: Arial, sans-serif; /* Police du texte */
            color: #333; /* Couleur du texte */
            display: flex; /* Pour aligner l'ic√¥ne et le texte */
            align-items: center; /* Centrer verticalement l'ic√¥ne et le texte */
        }
        
        .text-with-icon i {
            color: #21639e; /* Ic√¥ne en rouge vif */
            margin-right: 8px; /* Espacement entre l'ic√¥ne et le texte */
        }




    /* Menu lat√©ral √† droite */
    .side-menu {
        position: fixed;
        top: 20px;
        right: 0;
        width:150px;
        background-color: #ffffff;
        box-shadow: -2px 0px 5px rgba(0, 0, 0, 0.2);
        padding: 20px;
        border-radius: 10px 0 0 10px;
    }

    .side-menu h3 {
        font-size: 16px;
        color: rgb(223, 238, 255);
        margin-bottom: 20px;
    }

    .side-menu .menu-item {
        padding: 10px;
        cursor: pointer;
        background-color: #f9f9f9;
        margin-bottom: 10px;
        border-radius: 5px;
    }

    .side-menu .menu-item:hover {
        background-color: #e0e0e0;
    }
    
    /*AJOUT FACTURES*/
    /* body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;

           
        }  */
        .invoice-container {
    width: 1000px;
    background: white;
    padding: 20px;
    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    border-radius: 5px;

}

        .container00 {
        width: 280px;
        height: 398px; /* D√©finir une hauteur fixe */
        overflow-y: auto; /* Activer le d√©filement vertical */
        border: 1px solid #ccc; /* Ajoute une bordure pour la visibilit√© */
        padding: 10px;
        background: #f9f9f9;
    }



    .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 10px;
    margin-bottom: 20px;
}
    /*LOGO BOX */
    .logo-box {
    width: 220px;
    height: 110px;
    border: 2px dashed #aaa;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    background-color: #f8f8f8;
    border-radius: 10px;
}

/* Ic√¥ne de chargement üì∑ */
#uploadIcon {
    font-size: 30px;
    color: #888;
}

/* Style de l'image pour qu'elle soit centr√©e */
#logoPreview {
    max-width: 100%;
    max-height: 100%;
    position: absolute;
    object-fit: cover;
}

/* Cacher l'image au d√©part */
.hidden {
    display: none;
}



/*TITLE BOX*/
.title-box {
            display: inline-block;
            width: 400px;
            height: 50px;
            border: 2px solid #21639e;
            text-align: center;
            line-height: 50px;
            font-size: 16px;
            color: #21639e;
            margin-left: 20px;
            margin-top: 0px;
            /* transform: translateX(-50%); /* Centre horizontalement */
            transform: translateY(-50%);    
            /*transform: translate(-50%, -50%); /* Centre parfaitement */

        }
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            box-shadow: 0px 0px 10px gray;
            border-radius: 5px;
        }
        .modal input {
            width: 100%;
            padding: 5px;
            margin-bottom: 10px;
        }
        .modal button {
            background: #21639e;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
        .title-box2 {
    display: inline-block;
    width: 400px;
    height: 50px;
    border: 2px solid #21639e;
    text-align: center;
    line-height: 50px;
    font-size: 16px;
    color: #21639e;
    margin-left: 20px;
    margin-top: 0px; /* Espace entre title-box et title-box2 */
}
.deux {
    margin-top: 0px;
    text-align: center;
    line-height: 50px;
    font-size: 16px;
    color: #21639e;
    flex-direction: row;
    display: flex;
    height: 40px;

}
    </style>
</head>
<body>


        <!-- Menu √† gauche -->
        <!-- <div id="menu" style="width: 220px; position: fixed; height: 100%; background-color: #f4f4f4;">
            <div class="menu-item" onclick="loadContent('ajouter_clients.html')">
                <div class="text-with-icon">
                    <i class="fas fa-plus"></i> Client
                </div>
            </div>
            <div class="menu-item" onclick="loadContent('ajouter_facture.html')">
                <div class="text-with-icon">
                    <i class="fas fa-file-invoice"></i> Facture
                </div>
            </div>
        </div> -->
    
        <!-- Contenu principal -->
        <!-- <div id="content" style="margin-left: 220px; padding: 20px;">
            <h2>Bienvenue</h2>
            <p>S√©lectionnez une option dans le menu pour afficher du contenu ici.</p>
        </div> -->
        

    <nav>
        <ul class="menu" style="position: fixed; overflow-y: auto;
        top: 20px;
        right: 0;
        width:150px;
        background-color: #ffffff;
        box-shadow: -2px 0px 5px #7a7a7a;
        padding: 20px;
        border-radius: 10px 0 0 10px;">

        <h3  style="font-size: 16px;
        color: rgb(223, 238, 255);
        margin-bottom: 20px;" >Menu</h3>
            <!-- Bouton de retour -->
                <a href="{% url 'home' %}" class="dropdown" style=" color:black; padding: 10px;cursor: pointer; background-color: rgb(255, 255, 173);margin-bottom: 10px;border-radius: 5px;">Revenir</a>


                <a href="#" class="dropdown-toggle"style="        padding: 10px;    background: linear-gradient(to bottom, rgba(153, 204, 255, 0.3), rgba(0, 0, 0, 0)); 
                z-index: 10;  /* S'assure que le header reste au-dessus du contenu */
                box-shadow: 0 4px 6px rgba(198, 231, 255, 0.3);  /* Ombre pour le header */
                /* background: rgba(0, 0, 0, 0.3);  Utilise un fond semi-transparent */
                backdrop-filter: blur(10px);  /* Applique un flou de fond */
                background-color: #fff; /* üé® Fond blanc */
                box-shadow: 0px 4px 6px rgba(153, 182, 255, 0.2);/* üåü Effet d‚Äôombre */
                border-radius: 10px; /* üü¢ Bords arrondis */
                cursor: pointer;
                /* background-color: #21639e; */ color:black;
                margin-bottom:10px;
                border-radius: 5px;" 
                
                
                >Actions</a>
                <ul class="dropdown-menu" style="       
                cursor: pointer;
                background-color: white;
                margin-bottom: 10px;
                border-radius: 5px;">

                
                    <li><a style="border: 1px solid rgb(255, 255, 255);border-radius: 5px;  margin-bottom: 1px; background-color: #fdfafa;             color: black;   " href="{% url 'base_customers' %}">Client</a></li>
                    <li><a style="border: 1px solid rgb(255, 255, 255);border-radius: 5px;  margin-bottom: 5px; background-color: #fdfafa;             color: black;   " href="{% url 'base_invoices' %}">Document</a></li>
                </ul>
            </li>
            <a href="#" class="dropdown-toggle"style="        padding: 10px;    background: linear-gradient(to bottom, rgba(153, 204, 255, 0.3), rgba(0, 0, 0, 0)); 
            z-index: 10;  /* S'assure que le header reste au-dessus du contenu */
            box-shadow: 0 4px 6px rgba(198, 231, 255, 0.3);  /* Ombre pour le header */
            /* background: rgba(0, 0, 0, 0.3);  Utilise un fond semi-transparent */
            backdrop-filter: blur(10px);  /* Applique un flou de fond */
            background-color: #fff; /* üé® Fond blanc */
            box-shadow: 0px 4px 6px rgba(153, 182, 255, 0.2);/* üåü Effet d‚Äôombre */
            border-radius: 10px; /* üü¢ Bords arrondis */
            cursor: pointer;
            /* background-color: #21639e; */ color:black;
            margin-bottom:10px;
            border-radius: 5px;" >Pistes</a>
            <ul class="dropdown-menu" style="       
            cursor: pointer;
            background-color: white;
            margin-bottom: 10px;
            border-radius: 5px;"
            
            >

            
                <li><a style="border: 1px solid rgb(255, 255, 255);border-radius: 5px;  margin-bottom: 1px; background-color: #fdfafa;             color: black;   " href="{% url 'ajouter_client_professionnel' %}">Livraison</a></li>
                <li><a style="border: 1px solid rgb(255, 255, 255);border-radius: 5px;  margin-bottom: 5px; background-color: #fdfafa;             color: black;   " href="{% url 'creer_facture_etape1' %}">Ech√©ance</a></li>
                <li><a style="border: 1px solid rgb(255, 255, 255);border-radius: 5px;  margin-bottom: 5px; background-color: #fdfafa;             color: black;   " href="{% url 'creer_facture_etape1' %}">Maintenance</a></li>

            </ul>
        </li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" style=" padding: 10px;cursor: pointer; background-color: #21639e;margin-bottom: 10px;border-radius: 5px;">Listes</a>
                <ul class="dropdown-menu" style="cursor: pointer;background-color: #ffffff;  margin-bottom: 10px;border-radius: 5px;" >
                    <li><a style="border: 1px solid rgb(255, 255, 255);border-radius: 5px; margin-bottom:1px;  background-color: #fafafa;                  color: black;   "  href="{% url 'client_list' %}">Clients</a></li>
                    <li><a style="border: 1px solid rgb(255, 255, 255);border-radius: 5px;  margin-bottom: 5px; background-color: #fafafa;                  color: black;   "href="#">Rappels</a></li>

                    <li><a style="border: 1px solid rgb(255, 255, 255);border-radius: 5px;  margin-bottom: 1px; background-color: #fafafa;                  color: black;   "href="{% url 'list_facture' %}">Factures</a></li>
                    <li><a style="border: 1px solid rgb(255, 255, 255);border-radius: 5px;  margin-bottom: 5px; background-color: #fafafa;                  color: black;   "href="#">Documents</a></li>
                </ul>
            </li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" style=" padding: 10px;
                cursor: pointer;
                background-color: #21639e;
                margin-bottom: 10px;
                border-radius: 5px;">Pilotage</a>
                <ul class="dropdown-menu" style="cursor: pointer;background-color: #ffffff;margin-bottom: 10px;
                border-radius: 5px;" >
                    <li><a style="border: 1px solid rgb(255, 255, 255);border-radius: 5px; margin-bottom:1px;  background-color: #fafafa;                  color: black;   " href="#">Tableau de bord</a></li>
                    <li><a style="border: 1px solid rgb(255, 255, 255);border-radius: 5px; margin-bottom:1px;  background-color: #fafafa;                  color: black;   " href="#">Tableau d'analyse</a></li>
                </ul>
            </li>
        </ul>
    </nav>



    <div id="content" style=" margin-top:    0px; margin-left: 90px; padding-bottom:0px;margin-bottom:0px   "> 
        {% block content%}
        <h2>Bienvenue aux SERVICES</h2>
        <img src="{% static 'images/base_s.jpg' %}" alt="Bienvenue aux services" style="height: 600px; width: 780px;   margin-top:0px; padding-top:   0px;padding-bottom:0px; ">     
        {% endblock content%}
    </div>
    

    <script>
        document.querySelectorAll('.dropdown-toggle').forEach(item => {
            item.addEventListener('click', function (e) {
                e.preventDefault();  // Emp√™che le comportement par d√©faut du lien
                const menu = this.nextElementSibling;
                
                // Si le menu est d√©j√† ouvert, on le referme, sinon on l'ouvre
                if (menu.classList.contains('show')) {
                    menu.classList.remove('show');
                } else {

                    // Affiche le menu actuel avec l'animation d'agrandissement
                    menu.classList.add('show');
                }
            });
        });
    </script>







<script>
    // function loadContent(page) {
    //     fetch(`/load-content/${page}/`)
    //     .then(response => response.json())
    //     .then(data => {
    //         if (data.html) {
    //             document.getElementById("content").innerHTML = data.html;
    //         } else {
    //             document.getElementById("content").innerHTML = "<p>Erreur de chargement.</p>";
    //         }
    //     })
    //     .catch(error => console.error("Erreur lors du chargement :", error));
    // }
    
    // document.querySelectorAll(".menu-item").forEach(item => {
    //     item.addEventListener("click", function() {
    //         const page = this.getAttribute("data-page");
    //         loadContent(page);
    //     });
    // });

    function loadContent(page) {
    fetch(`/load-content/${page}/`)
    .then(response => response.json())
    .then(data => {
        if (data.html) {
            // Ins√©rer le contenu dans #content
            document.getElementById("content").innerHTML = data.html;

            // Recharger les fichiers CSS
            document.querySelectorAll("link[rel='stylesheet']").forEach(sheet => {
                const href = sheet.getAttribute("href").split("?")[0]; // Supprime les anciennes versions
                sheet.setAttribute("href", href + "?v=" + new Date().getTime()); // Ajoute un cache-buster
            });

            // Recharger les scripts JS du nouveau contenu
            document.querySelectorAll("#content script").forEach(oldScript => {
                const newScript = document.createElement("script");
                if (oldScript.src) {
                    newScript.src = oldScript.src;
                    newScript.async = true;
                } else {
                    newScript.textContent = oldScript.textContent;
                }
                document.body.appendChild(newScript);
                oldScript.remove(); // Supprime l'ancien script
            });

        } else {
            document.getElementById("content").innerHTML = "<p>Erreur de chargement.</p>";
        }
    })
    .catch(error => console.error("Erreur lors du chargement :", error));
}

// Ajouter les √©v√©nements aux √©l√©ments du menu
document.querySelectorAll(".menu-item").forEach(item => {
    item.addEventListener("click", function() {
        const page = this.getAttribute("data-page");
        loadContent(page);
    });
});

    
    </script>







<!-- AJOUTER CLIENT -->
<script>
    // S√©lection des √©l√©ments
    const select = document.getElementById("countrySelect");
    const flag = document.getElementById("flag");
    const phoneInput = document.getElementById("phoneInput");

    // G√©rer le changement de pays
    select.addEventListener("change", function () {
        let selectedOption = this.options[this.selectedIndex]; // Option s√©lectionn√©e
        let countryCode = selectedOption.value; // Code du pays (ex: "tn")
        let dialCode = selectedOption.getAttribute("data-dial"); // Indicatif t√©l√©phonique

        // Modifier l'URL de l'image du drapeau
        flag.src = `https://flagcdn.com/w40/${countryCode}.png`;

        // Mettre √† jour le champ du t√©l√©phone avec l'indicatif
        phoneInput.value = dialCode + " ";
        phoneInput.focus(); // Mettre le curseur apr√®s l'indicatif
    });
</script>


<script>


    // Ajouter un √©v√©nement sur le changement de pays
    select.addEventListener("change", function () {
        let countryCode = this.value; // R√©cup√©rer la valeur s√©lectionn√©e (ex: "fr", "us", etc.)
        flag.src = `https://flagcdn.com/w40/${countryCode}.png`; // Modifier l'URL de l'image
    });


    document.getElementById("clientToggle").addEventListener("change", function() {
        let proPopup = document.getElementById('clientPopup-professionnel'); 
        let partPopup = document.getElementById('clientPopup-particulier');

        if (this.checked) {
            proPopup.style.display = "none";
            partPopup.style.display = "flex";
        } else {
            proPopup.style.display = "flex";
            partPopup.style.display = "none";   
        }    });

</script>








<!-- Ajouter factures -->
<script>
    document.getElementById('logoInput').addEventListener('change', function(event) {
const file = event.target.files[0]; // R√©cup√©rer le fichier s√©lectionn√©

if (file && file.type.startsWith('image/')) { // V√©rifier que c'est bien une image
    const reader = new FileReader();
    reader.onload = function(e) {
        const img = document.getElementById('logoPreview');
        img.src = e.target.result; // Afficher l'image s√©lectionn√©e
        img.classList.remove('hidden'); // Afficher l‚Äôimage

        // Masquer l'ic√¥ne üì∑
        document.getElementById('uploadIcon').style.display = 'none';
    }
    reader.readAsDataURL(file); // Lire l'image en base64
} else {
    alert("Veuillez s√©lectionner une image valide !");
}
});

</script>
<script>
function openTitleModal() {
    document.getElementById('titleModal').style.display = 'block';
}
function closeTitleModal() {
    document.getElementById('titleModal').style.display = 'none';
}
function saveTitle() {
    var title = document.getElementById('titleInput').value;
    if (title.trim() !== '') {
        document.getElementById('titleBox').innerText = title;
    }
    closeTitleModal();
}
</script>
</body>
</html>
